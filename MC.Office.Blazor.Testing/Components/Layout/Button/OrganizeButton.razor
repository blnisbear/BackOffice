@* OrganizeDropdown.razor *@
<div class="position-relative d-inline-block"
     @onmouseenter="OpenDropdown"
     @onmouseleave="CloseDropdown"
     @onclick="OnClickButton">
    <DxButton CssClass="me-2 rounded-5 px-2 px-sm-2 px-md-4 px-lg-4 px-xl-4 py-2 py-sm-2 py-md-2 py-lg-2 py-xl-2"
              SizeMode="SizeMode.Large">
        <i class="fa-solid fa-globe fs-6 me-0 me-sm-0 me-md-1 me-lg-1 me-xl-1" />
        <span class="d-none d-sm-none d-md-flex d-lg-flex d-xl-flex">Organize</span>
    </DxButton>

    @if (isDropdownOpen)
    {
        <div class="position-absolute bg-white border rounded shadow-lg start-0 w-100"
             style="z-index: 1050; min-width: 120px; margin-top: 1px;"
             @onmouseleave="CloseDropdown">
            <div class="py-2">
                @foreach (var item in organizeItems)
                {
                    <div class="px-3 py-2 d-flex align-items-center @(item == SelectedOrganize ? "bg-primary bg-opacity-10 text-primary fw-medium" : "")"
                         style="cursor: pointer;"
                         @onclick="() => SelectItem(item)"
                         @onmouseenter="@(e => hoveredItem = item)"
                         @onmouseleave="@(e => hoveredItem = null)">
                        <i class="fa-solid fa-globe me-2 @(item == SelectedOrganize ? "text-primary" : "text-secondary")"></i>
                        <span>@item</span>
                        @if (item == SelectedOrganize)
                        {
                            <i class="fa-solid fa-check ms-auto small text-primary"></i>
                        }
                    </div>
                }
            </div>
        </div>
    }
</div>

<style>
    .position-relative div[style*="cursor: pointer"]:hover:not(.bg-primary) {
        background-color: var(--bs-light) !important;
    }
</style>

@code {
    private bool isDropdownOpen = false;
    private string? hoveredItem = null;

    private List<string> organizeItems = new List<string> { "MCIC", "LF", "VLP", "VN" };

    [Parameter]
    public string SelectedOrganize { get; set; } = "MCIC";

    [Parameter]
    public EventCallback<string> SelectedOrganizeChanged { get; set; }

    private void OnClickButton()
    {
        isDropdownOpen = !isDropdownOpen;
        StateHasChanged();
    }

    private void OpenDropdown()
    {
        isDropdownOpen = true;
        StateHasChanged();
    }

    private void CloseDropdown()
    {
        isDropdownOpen = false;
        StateHasChanged();
    }

    private async Task SelectItem(string item)
    {
        SelectedOrganize = item;
        await SelectedOrganizeChanged.InvokeAsync(item);
        isDropdownOpen = false;
    }
}